/**
* Summit Lightbox
* Version: 1.0.3
* URL: @ThemeMountain
* Description: Lightbox plugin
* Requires: jQuery 1.10+
* Author: ThemeMountain
* Copyright: Copyright 2013 ThemeMountain
* License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(t,i,e,a){"use strict";var n=function(i,a){var n=t.extend({},t.fn.summitLightbox.tmlOpts,a),c=t(i),d=this,p=[];c.on("click",function(i){i.preventDefault(),t(c).data("group")&&(p=o(c)),t(this).addClass("tml-active"),n.lightboxAnimation=t(this).data("lightbox-animation")?t(this).data("lightbox-animation"):n.lightboxAnimation,n.contentAnimation=t(this).data("content-animation")?t(this).data("content-animation"):n.contentAnimation,l(p,n,c,d)}),t(e).on("resize",function(){m(n)}),d.nextContent=function(){var i=t("#tml-content");if(i.data("loading"))return!1;h(0,n);var e=t(".tml-active"),a=o(e),r=a[t.inArray(e.attr("id"),a)+1];r=t.inArray(r,a)+1===0?a[0]:r,e.removeClass("tml-active"),r=t("#"+r).addClass("tml-active"),s(r,"next",n),a.length=0},d.prevContent=function(){var i=t("#tml-content");if(i.data("loading"))return!1;h(0,n);var e=t(".tml-active"),a=o(e),r=a[t.inArray(e.attr("id"),a)-1];r=t.inArray(r,a)+1===0?a[a.length-1]:r,e.removeClass("tml-active"),r=t("#"+r).addClass("tml-active"),s(r,"prev",n),a.length=0},d.destroyLightbox=function(){var i=t("#tm-lightbox"),e=t("#tml-content"),a=null;t("body").removeClass("modal-open");var o=r(i,n);if(b){if(i.data("transitioning"))return!1;i.children().css({transition:"none"}),e.css({transition:"none"}),i.one(w,function(){clearTimeout(a),a=setTimeout(function(){i.find("iframe").attr("src",""),i.remove(),i=null},50)}),u(i,0,o.x,o.y,n)}else{if(i.is(":animated"))return!1;e.remove(),i.animate({opacity:0,left:o.x+"px",top:o.y+"px"},n.speed,n.easing,function(){i.find("iframe").attr("src",""),i.remove(),i=null})}p.length=0,t(".tml-active").removeClass("tml-active"),n.onExit&&n.onExit()}},o=function(i){if(t(i).is("[data-group]")){var e=t(i).data("group"),a=[];return t('[data-group="'+e+'"]').each(function(i){i++,t(this).attr("id")?a.push(t(this).attr("id")):(t(this).attr("id",e+"-tml-thumb-"+i),a.push(t(this).attr("id")))}),a}},r=function(i,a){var n=a.lightboxAnimation,o="slideInLeft"===n||"slideInTop"===n?-1:"slideInRight"===n||"slideInBottom"===n?1:0,r="slideInLeft"===n||"slideInRight"===n?t(e).width()*o:0,l="slideInTop"===n||"slideInBottom"===n?t(e).height()*o:0;return{x:r,y:l}},l=function(a,n,o,l){if(t("#tm-lightbox").length)return!1;t("body").append('<div id="tm-lightbox" class="tm-lightbox"><div id="tml-content-wrapper" ><div id="tml-content" /></div><div id="tml-caption" /></div>');var s=t("#tm-lightbox"),d=t("#tml-content-wrapper"),h=t("#tml-content"),p=null;o.is("[data-modal-mode]")&&(s.addClass("tml-modal-mode"),h.addClass("modal-dialog"),t("body").addClass("modal-open"),o.data("modal-width")&&s.data("modal-width",o.data("modal-width")),o.data("modal-height")&&s.data("modal-height",o.data("modal-height"))),s.data("initLoad",!0);var f=n.contentMargin;if(d.css({top:f+"%",right:f+"%",bottom:f+"%",left:f+"%"}),a.length<2||h.swipeIt({preventTouchOn:".scrollable-content",onSwipeMove:function(t){h.css({left:t+"px"})},onSwipeEnd:function(t){"left"===t?l.prevContent():l.nextContent()}}),n.overlay||s.css({background:"none"}),n.navArrows&&a.length>=2){var v=t('<a href="#" />').attr("id","tml-prev").addClass("tml-nav").appendTo(s),g=t('<a href="#" />').attr("id","tml-next").addClass("tml-nav").appendTo(s);v.on("click",function(t){t.preventDefault(),l.prevContent()}),g.on("click",function(t){t.preventDefault(),l.nextContent()})}if(n.navExit){var x;x=t('<a href="" id="tml-exit" class="tml-nav" />').appendTo(s.hasClass("tml-modal-mode")?h:s),x.on("click",function(t){t.preventDefault(),l.destroyLightbox()})}if(n.navToolbar){var y,C,z,k=600,T=400,A=t(e).height()/2-T/2,I=t(e).width()/2-k/2,S=t(location).attr("href"),O=t('<div id="tml-tool-bar" />').appendTo(s),L=(o.data("toolbar")+"").split(";");if(n.navZoom=o.is("[data-toolbar]")?t.inArray("zoom",L)>-1?!0:!1:n.navZoom,n.navShare=o.is("[data-toolbar]")?t.inArray("share",L)>-1?!0:!1:n.navShare,n.navZoom&&(C=t('<a id="tml-zoom" class="tml-nav" href="#" title="Zoom"></a>').appendTo(O),C.on("click",function(t){t.preventDefault(),d.toggleClass("zoomed"),m(n)})),n.navShare){var M=o.is("[data-list-vertical]")?"list-vertical":"list-horizontal";z=t('<div id="tml-share-wrapper"><a id="tml-share" class="tml-nav" href="#" title="Share"></a><ul class="tml-social-list '+M+'" /></div>').appendTo(O);var E=o.data("networks")?(o.data("networks")+"").split(";"):n.navNetworks.split(",");t.each(E,function(t,i){z.find("ul").append("<li><a data-"+i+' class="tml-nav" href="#">'+i+"</a></li>")}),z.children("a").on("click",function(t){t.preventDefault(),z.children("ul").toggleClass("active")}),z.find("ul a").on("click",function(i){i.preventDefault();var a=o.data("caption"),n=o.data("twitter-user")?o.data("twitter-user"):"",r=o.data("image-url")?o.data("image-url"):o.attr("href");return t(this).is("[data-facebook]")?y="https://www.facebook.com/sharer/sharer.php?u="+S+",sharer":t(this).is("[data-twitter]")?y="https://twitter.com/intent/tweet?url="+r+"&amp;via="+n:t(this).is("[data-pinterest]")&&(y="http://pinterest.com/pin/create/button/?url="+S+"&amp;media="+r+"&amp;description="+a),e.open(y,"popup","width="+k+",height="+T+", scrollbars=yes, top="+A+",left="+I),!1})}}n.navKeyboard&&t(i).on("keyup",function(t){37!=t.keyCode||a.length<2?39!=t.keyCode||a.length<2?27==t.keyCode&&l.destroyLightbox():l.nextContent():l.prevContent()}),n.overlayClickClose&&s.on("click",function(t){(t.target===this||"tml-content-wrapper"===t.target.id)&&l.destroyLightbox()});var D=r(s,n);if(b){if(s.css({transition:"none",transform:"translate3d("+D.x+"px, "+D.y+"px, 0px)"}),s.data("transitioning"))return!1;clearTimeout(p),p=setTimeout(function(){s.one(w,function(){c(t(".tml-active"),"next",n)}),u(s,1,0,0,n)},50)}else s.css({left:D.x+"px",top:D.y+"px"}),s.animate({opacity:1,left:0,top:0},n.speed,n.easing,function(){c(t(".tml-active"),"next",n)})},s=function(i,e,a){var n=(t("#tm-lightbox"),t("#tml-content"));n.data("loading",!0);var o="fade"===a.contentAnimation?0:a.slideAmount;if(e="next"===e?1:-1,b)n.one(w,function(){t(this).css({visibility:"hidden"}),c(i,e,a)}),u(n,0,-o*e,0,a);else{var r=n.position().left;n.animate({opacity:0,left:r-o*e+"px"},a.speed,a.easing,function(){t(this).css({visibility:"hidden"}),c(i,e,a)})}},c=function(i,a,n){var o=t("#tm-lightbox"),r=t("#tml-content"),l=t("#tml-exit").clone(!0),s=o.hasClass("tml-modal-mode")?!0:!1;r.find("iframe").attr("src",""),r.removeClass("tml-error scrollable-content").data("type","").html("");var c=i.attr("href"),m=c.match(/\.(jpeg|jpg|png|gif)/i),u=c.match(/(vimeo\.com|youtu(be\.com|\.be))\/(watch\?v=)?([A-Za-z0-9._%-]*)(\&\S+)?/),h=i.is('[data-content="inline"]'),p=i.is('[data-content="iframe"]'),f=i.is('[data-content="ajax"]');if(t("#tml-loader").length&&t("#tml-loader").remove(),o.append('<div id="tml-loader" class="tm-loader"><div id="circle" /></div>'),m){var v=c.substr(c.lastIndexOf("."));(e.isRetinaDevice()&&n.retinaSupport||e.isRetinaDevice()&&i.is("[data-retina]"))&&(!z&&!n.retinaSupportMobile||z&&n.retinaSupportMobile)&&(c=c.replace(v,n.retinaSuffix+v)),r.data("type","img"),t("<img />").addClass("tml-image").attr("src",c).one("load",function(){r.html(t(this)),d(!0,a,n)}).each(function(){this.complete&&t(this).trigger("load")}).on("error",function(){d(!1,a,n)})}if(u){r.data("type","video");var b=t('<iframe src="'+c+'" wmode="opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen />');r.html(b),b.one("load",function(){d(!0,a,n)})}if(h)if(r.addClass("scrollable-content").data("type","inline"),t(c).length){var g=t(c).clone(!0).addClass("show").css({visibility:"visible",opacity:1});r.html(g),d(!0,a,n)}else d(!1,a,n);if(p){r.addClass("scrollable-content").data("type","iframe");var x=t('<iframe src="'+c+'" frameborder="0" scrolling="auto" />');r.html(x),x.one("load",function(){d(!0,a,n)})}if(f){r.addClass("scrollable-content").data("type","ajax");var y=i.data("target-container");t.ajax({url:c,cache:!1,success:function(i){r.html(t(i).find(y).length?t(i).find(y):i),d(!0,a,n)},error:function(){d(!1,a,n)}})}s&&r.append(l)},d=function(i,e,a){var n=t("#tm-lightbox"),o=t("#tml-content"),r=null;if(m(a),n.find("#tml-loader").remove(),i){var l="fade"===a.contentAnimation?0:a.slideAmount;if(b)o.css({transition:"none",opacity:0,transform:"translate3d("+l*e+"px, 0, 0)"}),clearTimeout(r),r=setTimeout(function(){o.one(w,function(){o.data("loading",!1)}),u(o,1,0,0,a)},50);else{var s=o.position().left,c=n.data("initLoad")?s:1===e?s+2*l:s-2*l;o.css({visibility:"visible",left:c+"px"}).animate({opacity:1,left:s+"px"},a.speed,a.easing,function(){o.data("loading",!1)})}h(1,a),a.onLoaded&&a.onLoaded()}else{var d="";a.showErrorSrc&&(d=": "+t(".tml-active").attr("href")),o.css({width:"100%",height:"auto",top:"50%",left:0,transition:"none",transform:"translate3d( 0, 0, 0)"}).addClass("tml-error").html(a.errorMessage+d),b?(clearTimeout(r),r=setTimeout(function(){o.one(w,function(){o.data("loading",!1)}),u(o,1,0,0,a)},50)):o.css({visibility:"visible"}).animate({opacity:1},function(){o.data("loading",!1)})}n.data("initLoad",!1)},m=function(i){var e=t("#tm-lightbox"),a=e.hasClass("tml-modal-mode")?!0:!1,n=t("#tml-content-wrapper").width(),o=t("#tml-content-wrapper").height(),r=e.data("modal-width"),l=e.data("modal-height"),s=t("#tml-content"),c=s.data("type"),d=0,m=0,u=0,h=0,p=0;if(s.not(".tml-error").css({height:"auto",width:"auto",top:"",left:""}),"img"===c)m=s.find("img").width(),u=s.find("img").height();else if("video"===c)m=i.maxWidth,u=m/1.778;else if("iframe"===c)m=n<i.maxWidth?n:i.maxWidth,u=o;else{var f=(s.children().outerWidth(),s.children().outerHeight());m=a?r>n?n:r:n,u=a&&l?l:a&&!l?f:o>f?f:o}("img"===c||"video"===c)&&(d=m/u>n/o?m/n:u/o,m=m/d>m?m:m/d,u=u/d>u?u:u/d),p=(n-m)/2,h=o>u?(o-u)/2:0,s.css({width:Math.round(m)+"px",height:Math.round(u)+"px",top:Math.round(h)+"px",left:Math.round(p)+"px"})},u=function(i,e,a,n,o){{var r=t("#tm-lightbox");t("#tml-content")}"tm-lightbox"===i.attr("id")&&r.data("transitioning",!0);var l={};l.transform="translate3d("+a+"px, "+n+"px, 0px)",l.transitionProperty=y+", opacity",l.transitionDuration=o.speed+"ms",l.transitionTimingFunction=C[o.easing],l.visibility="visible",l.opacity=e,i.css(l).one(w,function(e){e.stopPropagation(),t(this).off(w),"tm-lightbox"===i.attr("id")&&r.data("transitioning",!1)})},h=function(i,e){var a=t("#tml-caption"),n=t(".tml-active").data("caption");n?(a.html(t("<span />").text(n)),b?u(t("#tml-caption"),i,0,0,e):t("#tml-caption").animate({opacity:i})):a.html("")};e.isRetinaDevice=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(t).matches?!0:!1};var p,f=i.body||i.documentElement,v=f.style,b=v.transition!==a||v.WebkitTransition!==a||v.MozTransition!==a||v.MsTransition!==a||v.OTransition!==a,g=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var x in g)v[g[x]]!==a&&(p="-"+g[x].replace("Transform","").toLowerCase());var y=p+"-transform",w="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",C={linear:"cubic-bezier(0, 0, 1, 1)",swing:"cubic-bezier(0.42, 0, 0.58, 1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},z=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(z=!0),t.fn.summitLightbox=function(i){return this.each(function(){var e=t(this);if(!e.data("summitLightbox")){var a=new n(this,i);e.data("summitLightbox",a)}})},t.fn.summitLightbox.tmlOpts={lightboxAnimation:"fade",contentAnimation:"slide",slideAmount:100,easing:"swing",speed:350,overlay:!0,maxWidth:1140,contentMargin:15,navArrows:!0,navKeyboard:!0,navExit:!0,navToolbar:!0,navZoom:!0,navShare:!0,navNetworks:"facebook,twitter,pinterest",overlayClickClose:!0,retinaSupport:!1,retinaSupportMobile:!1,retinaSuffix:"@2x",errorMessage:"Please Check",showErrorSrc:!0,onSetup:null,onLoaded:null,onDestroy:null}}(jQuery,document,window);
