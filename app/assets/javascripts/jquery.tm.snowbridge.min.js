/**
* Snowbridge Parallax
* Version: 1.0.1
* URL: @ThemeMountain
* Description: Parallax plugin
* Requires: jQuery 1.10+
* Author: ThemeMountain
* Copyright: Copyright 2013 ThemeMountain
* License: Attribution-NonCommercial 3.0 (http://creativecommons.org/licenses/by-nc/3.0/)
*/
!function(t,a,i,e){"use strict";function n(a,e){var n=t('<div class="tm-parallax" />').prependTo(t(a));g&&n.css({height:""}).addClass("tmp-mobile");var o=t('<div class="tm-loader"><div id="circle" /></div>');o.appendTo(n);var s=a.data("src"),c=s.substr(s.lastIndexOf("."));(i.isRetinaDevice()&&e.retinaSupport||i.isRetinaDevice()&&a.is("[data-retina]"))&&(!g&&!e.retinaSupportMobile||g&&e.retinaSupportMobile)&&(s=a.data("src").replace(c,e.retinaSuffix+c)),t('<img class="tmp-media"/>').attr("src",s).one("load",function(){t(this).attr("src",s).appendTo(n),n.find(".tm-loader").remove(),r(a,e)}).on("error",function(){console.log("Error src:"+s)})}function r(a,e){var n=a.find(".tmp-media");n.data("refW",n.width()).data("refH",n.height()),n.css({opacity:0}),c(a,e),l(a,e),m&&d(a)?n.css({visibility:"visible",transitionProperty:"opacity",transitionDuration:"1000ms",opacity:1}):n.css({visibility:"visible"}).animate({opacity:1}),t(i).on("resize",function(){c(a,e),s(a,e)}),t(i).on("scroll",function(){s(a,e)}),e.onLoaded&&e.onLoaded()}var o=function(a,i){var e=t.extend({},t.fn.snowBridge.tmpOpts,i),r=t(a),o=e.scaleContainer?e.scaleUnder:r.width();r.data("animating",!1).data("setup",!1).data("refW",o).data("refH",r.height()),c(r,e),e.fullscreen&&(e.scaleContainer=!0),e.parallaxFactor>1&&(e.parallaxFactor=1),r.data("setup",!0),n(r,e)},s=function(t,a){t.data("animating")||(i.requestAnimationFrame(function(){l(t,a)}),t.data("animating",!0))},c=function(a,e){var n=t(i).width(),r=t(i).height(),o=a.data("refW"),s=a.data("refH"),c=e.fullscreen?n/r:o/s,l=e.fullscreen?r:n/c>s?s:n/c;if((e.fullscreen||e.scaleContainer)&&(a.css({width:n+"px",height:Math.round(l)>e.scaleMinHeight?Math.round(l)+"px":e.scaleMinHeight+"px"}),l=Math.round(l)>e.scaleMinHeight?l:e.scaleMinHeight),!a.data("setup"))return!1;var d=a.find(".tmp-media"),h=d.data("refW"),p=d.data("refH"),u=h/p,m=e.fullscreen?r+r*e.parallaxFactor:e.scaleContainer?l+l*e.parallaxFactor:s+s*e.parallaxFactor,f=m*u,v=r+l,x=g?-((m-l)/2):0;d.css(e.fullscreen||e.scaleContainer?f>n?{width:Math.round(f)+"px",height:Math.round(m)+"px",left:-Math.round((f-n)/2)+"px",top:x+"px"}:{width:n+"px",height:Math.round(n/u)+"px",left:0,top:x+"px"}:f>n?{width:Math.round(m*u)+"px",height:Math.round(m)+"px",left:-Math.round((m*u-n)/2)+"px",top:x+"px"}:{width:n+"px",height:Math.round(n/u)+"px",left:0,top:x+"px"}),a.data("scrollDistContainer",v)},l=function(a,e){var n=a.find(".tmp-media");if(d(a)){if(g)return!1;var r=a.height()+a.offset().top-t(i).scrollTop(),o=a.offset().top-t(i).scrollTop(),s=0-n.height()/2,c=s*(r/a.data("scrollDistContainer"))*e.parallaxFactor;if(n.css(m?{transform:"translate3d( 0px, "+c+"px, 0px)",visibility:"visible"}:{top:c+"px",visibility:"visible"}),e.fadeInOut){var l,h=t(i).height(),p=e.fadeThreshold>1?.5*a.height():a.height()*e.fadeThreshold;o>p||(l=Math.abs(r/p)>1?1:Math.abs(r/p)),o>h||h-p>o||(l=(h-o)/p>1?1:(h-o)/p),n.parent().css({opacity:(Math.ceil(100*l)/100).toFixed(2)})}}else g||n.css({visibility:"hidden"});a.data("animating",!1)},d=function(a){var e=t(i).scrollTop(),n=e+t(i).height(),r=a.offset().top,o=r+a.outerHeight();return n>=r&&o>=e};i.isRetinaDevice=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return this.devicePixelRatio>1||this.matchMedia&&this.matchMedia(t).matches?!0:!1};var h,p=a.body||a.documentElement,u=p.style,m=u.transition!==e||u.WebkitTransition!==e||u.MozTransition!==e||u.MsTransition!==e||u.OTransition!==e,f=["WebkitTransform","MozTransform","OTransform","msTransform"];for(var v in f)u[f[v]]!==e&&(h="-"+f[v].replace("Transform","").toLowerCase());var g=!1;(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(g=!0),function(){for(var t=0,a=["ms","moz","webkit","o"],e=0;e<a.length&&!i.requestAnimationFrame;++e)i.requestAnimationFrame=i[a[e]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[a[e]+"CancelAnimationFrame"]||i[a[e]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(a){var e=(new Date).getTime(),n=Math.max(0,16-(e-t)),r=i.setTimeout(function(){a(e+n)},n);return t=e+n,r}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.fn.snowBridge=function(a){return this.each(function(){var i=t(this);if(!i.data("snowBridge")){var e=new o(this,a);i.data("snowBridge",e)}})},t.fn.snowBridge.tmpOpts={fullscreen:!1,parallaxFactor:.7,fadeInOut:!0,fadeThreshold:.5,scaleContainer:!0,scaleUnder:1140,scaleMinHeight:250,retinaSupport:!0,retinaSupportMobile:!1,retinaSuffix:"@2x",onLoaded:null}}(jQuery,document,window);
